{"version":3,"sources":["webpack:///./src/components/contact/contact-dialogue.vue?5b25","webpack:///./src/components/contact/contact-dialogue.vue","webpack:///./src/utils/debounce.js","webpack:///./src/components/contact/emotion.vue","webpack:///./src/components/contact/emotion.vue?ebb4","webpack:///./src/components/contact/contact-dialogue.vue?3116","webpack:///./node_modules/core-js/modules/es.date.to-string.js","webpack:///./src/components/contact/emotion.vue?e4ea","webpack:///./node_modules/core-js/modules/web.timers.js"],"names":["id","class","to","msgInfo2","tag","$router","back","pageName","msg","item","index","key","text","src","$store","state","userInfo","user_pic","toUser","$route","query","username","fromUser","otherpic","headerUrl","chooseEmojiDefault","emojihowVisible","currentChatWay","type","InpVal","focusIpt","blurIpt","emojiShow","style","submit","fun","delay","immediate","timer","args","that","this","_args","clearTimeout","apply","setTimeout","call","emojiJson","emotion","data","split","methods","e","console","log","$emit","__exports__","components","name","beforeRouteEnter","from","next","vm","commit","setup","route","store","value","msgInfo","getUserInfo","nickname","encodeURIComponent","JSON","stringify","message","debounce","date","Date","toLocaleString","obj","setInterval","document","body","scrollTop","scrollHeight","clearInterval","directives","more","mounted","element","startTx","startTy","addEventListener","msgMore","getElementById","touches","clientX","clientY","left","top","offsetTop","display","backgroundColor","changedTouches","disY","Math","abs","press","recording","querySelector","recordingVoice","recordingCancel","className","preventDefault","endTy","distanceY","render","uncurryThis","redefine","DatePrototype","prototype","INVALID_DATE","TO_STRING","un$DateToString","getTime","String","NaN","$","global","isCallable","userAgent","arraySlice","MSIE","test","Function","wrap","scheduler","handler","timeout","boundArgs","arguments","length","undefined","bind","forced"],"mappings":"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","file":"js/chunk-13129f83.b6040180.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./contact-dialogue.vue?vue&type=style&index=0&id=6f2d29fe&lang=less&scoped=true\"","<template>\r\n  <div>\r\n    <header id=\"wx-header\">\r\n      <div class=\"other\">\r\n             <router-link\r\n          :to=\"{ path:'/contact/details/contact-dialogue-details',query:{msgInfo2}}\"\r\n          tag=\"span\"\r\n          class=\"iconfont icon-chat-friends\"\r\n        >\r\n        </router-link>\r\n      </div>\r\n      <div class=\"center\">\r\n        <div class=\"iconfont icon-return-arrow\" @click=\"$router.back()\">\r\n          <span>返回</span>\r\n        </div>\r\n        <span>{{ pageName }}</span>\r\n      </div>\r\n    </header>\r\n    <div class=\"dialogue-section clearfix\">\r\n      <div  v-for=\"(item, index) in msg\"\r\n        :key=\"index\"  >\r\n         <li \r\n        class=\"self clearfix\"\r\n        v-show=\"item.toUser==$route.query.username&&item.fromUser==$store.state.userInfo.username\"     \r\n      >     \r\n        <p class=\"text\"  v-more>{{ item.text }}</p>\r\n        <div class=\"header\"><img :src=\"$store.state.userInfo.user_pic\"  /></div>      \r\n      </li>\r\n       <li \r\n        class=\"other clearfix\"\r\n        v-show=\"item.toUser==$store.state.userInfo.username&&item.fromUser==$route.query.username\" \r\n      >\r\n         <!-- 获取当前聊天的人的头像 -->\r\n        <div class=\"header\"><img :src=\"otherpic.headerUrl\" /></div>\r\n         <p class=\"text\"  v-more>{{ item.text }}</p>\r\n      </li>\r\n      </div>\r\n      <span class=\"msg-more\" id=\"msg-more\">\r\n        <ul>\r\n          <li>复制</li>\r\n          <li>转发</li>\r\n          <li>删除</li>\r\n        </ul>\r\n      </span>\r\n    </div>\r\n    <div class=\"emoji-container\" v-show=\"emojihowVisible\">\r\n        <emotion @chooseEmojiDefault=\"chooseEmojiDefault\"></emotion>\r\n    </div>\r\n    <footer class=\"dialogue-footer\">\r\n      <div class=\"component-dialogue-bar-person\">\r\n        <span\r\n          class=\"iconfont icon-dialogue-jianpan\"\r\n          v-show=\"!currentChatWay\"\r\n          @click=\"currentChatWay = true\"\r\n        >\r\n        </span>\r\n        <span\r\n          class=\"iconfont icon-dialogue-voice\"\r\n          v-show=\"currentChatWay\"\r\n          @click=\"currentChatWay = false\"\r\n        >\r\n        </span>\r\n        <div class=\"chat-way\" v-show=\"!currentChatWay\">\r\n          <div class=\"chat-say\" v-press>\r\n            <span class=\"one\">按住 说话</span>\r\n            <span class=\"two\">松开 结束</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"chat-way\" v-show=\"currentChatWay\">\r\n          <input\r\n            type=\"text\"\r\n            v-model=\"InpVal\"\r\n            class=\"chat-txt\"\r\n            @focus=\"focusIpt\"\r\n            @blur=\"blurIpt\"\r\n          />\r\n        </div>              \r\n        <span class=\"expression iconfont icon-dialogue-smile\" @click.stop=\"emojiShow\"></span>\r\n        <span class=\"more iconfont\" \r\n        style=\"font-size: 15px;\r\n              background: #aa96da;\r\n              padding: 0px 5px;\r\n              border-radius: 12px;\r\n              color: #fff;\" \r\n        @click=\"submit\">发送</span>\r\n        \r\n        <div class=\"recording\" style=\"display: none\" id=\"recording\">\r\n          <div\r\n            class=\"recording-voice\"\r\n            style=\"display: none\"\r\n            id=\"recording-voice\"\r\n          >\r\n            <div class=\"voice-inner\">\r\n              <div class=\"voice-icon\"></div>\r\n              <div class=\"voice-volume\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n            <p>手指上划，取消发送</p>\r\n          </div >\r\n          <div class=\"recording-cancel\" style=\"display:none\">\r\n              <div class=\"cancel-inner\"></div>\r\n              <p>松开手指，取消发送</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from \"vue-router\";\r\nimport {useStore} from \"vuex\";\r\nimport { onMounted,  computed,  ref } from \"vue\";\r\nimport  contact from \"../../store/contacts\"\r\nimport CHAT from \"../../client\"\r\nimport debounce from \"../../utils/debounce\"\r\nimport emotion from './emotion.vue';\r\n\r\nexport default {\r\n  components: { emotion },\r\n  name: \"contact-dialogue\",\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.$store.commit(\"setPageName\", vm.$route.query.name);\r\n    });\r\n  },\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const store=useStore();\r\n    let currentChatWay = ref(true); //true为键盘打字,false为语音输入\r\n    let timer = ref(null);\r\n    let InpVal=ref(\"\");\r\n    const emojihowVisible=ref(false)\r\n    const emojiShow=()=>{\r\n      emojihowVisible.value=!emojihowVisible.value\r\n    }\r\n    const chooseEmojiDefault=(e)=>{\r\n      //console.log(e)\r\n        InpVal.value+=e;\r\n    }\r\n    const msg=computed(()=>{return store.state.msg});\r\n    const msgInfo =computed(()=>{\r\n      return contact.getUserInfo(route.query.id)\r\n    })\r\n    let pageName = ref(msgInfo.value.nickname);\r\n    const msgInfo2=computed(()=>{\r\n      return encodeURIComponent(JSON.stringify(msgInfo.value))//对象作为路由参数时需要先转化为JSON格式的数据\r\n     })\r\n    const otherpic=computed(()=>{\r\n      return contact.getUserInfo(route.query.id)\r\n    })\r\n   \r\n    onMounted(()=>{\r\n      CHAT.message(store.state.userInfo.username)\r\n    })\r\n    const submit=debounce(()=>{\r\n     \r\n      var date=new Date().toLocaleString();  \r\n      //console.log(route.query.id)       \r\n      const obj={\r\n        date:date,\r\n        text:InpVal.value,\r\n        fromUser:store.state.userInfo.username,\r\n        toUser:route.query.username,\r\n      }\r\n      \r\n      InpVal.value=\"\";\r\n      CHAT.submit(obj)\r\n     \r\n    },500)\r\n    const focusIpt=()=>{\r\n        timer=setInterval(function(){\r\n            document.body.scrollTop=document.body.scrollHeight;\r\n        },100);\r\n    }\r\n    const blurIpt=()=>{\r\n        clearInterval(timer);\r\n    }\r\n    return {\r\n        pageName,\r\n        currentChatWay,\r\n        focusIpt,\r\n        blurIpt,\r\n        submit,\r\n        InpVal,\r\n        otherpic,\r\n        msg,\r\n        msgInfo,\r\n        msgInfo2,\r\n        chooseEmojiDefault,\r\n        emojiShow,\r\n        emojihowVisible\r\n    }\r\n  },\r\n  directives:{\r\n     more: {\r\n      mounted(element) {\r\n        var startTx, startTy;\r\n        element.addEventListener(\r\n          \"touchstart\",\r\n          function (e) {\r\n            var msgMore = document.getElementById(\"msg-more\"),\r\n              touches = e.touches[0];\r\n            startTx = touches.clientX;\r\n            startTy = touches.clientY;\r\n            clearTimeout(this.timer);\r\n            this.timer = setTimeout(() => {\r\n              // 控制菜单的位置\r\n              msgMore.style.left =\r\n                (startTx - 18 > 180 ? 180 : startTx - 18) + \"px\";\r\n              msgMore.style.top = element.offsetTop - 33 + \"px\";\r\n              msgMore.style.display = \"block\";\r\n              element.style.backgroundColor = \"#e5e5e5\";\r\n            }, 500);\r\n          },\r\n          false\r\n        );\r\n        element.addEventListener(\r\n          \"touchmove\",\r\n          function (e) {\r\n            var touches = e.changedTouches[0],\r\n              disY = touches.clientY;\r\n            if (Math.abs(disY - startTy) > 10) {\r\n              clearTimeout(this.timer);\r\n            }\r\n          },\r\n          false\r\n        );\r\n        element.addEventListener(\r\n          \"touchend\",\r\n          function () {\r\n            clearTimeout(this.timer);\r\n          },\r\n          false\r\n        );\r\n      },\r\n    },\r\n      press:{\r\n          mounted(element){\r\n              var recording=document.querySelector(\".recording\"),\r\n                  recordingVoice=document.querySelector(\".recording-voice\"),\r\n                  recordingCancel=document.querySelector(\".recording-cancel\"),\r\n                  startTy;\r\n              element.addEventListener(\"touchstart\",function(e){\r\n                  element.className=\"chat-say say-active\";\r\n                  recording.style.display=recordingVoice.style.display=\"block\"\r\n                  var touches=e.touches[0];\r\n                  startTy=touches.clientY;\r\n                  e.preventDefault();\r\n                  \r\n              },false);\r\n              element.addEventListener(\"touchend\",function(e){\r\n                  element.className=\"chat-say\";\r\n                  recordingCancel.style.display=recording.style.display=\r\n                  recordingVoice.style.display=\"none\";\r\n                  e.preventDefault();\r\n            },false);\r\n            element.addEventListener(\"touchmove\",function(e){\r\n                var touches=e.changedTouches[0],\r\n                endTy=touches.clientY,\r\n                distanceY=startTy-endTy;\r\n                if(distanceY>50){\r\n                    element.className=\"chat-say\";\r\n                    recordingVoice.style.display=\"none\";\r\n                    recordingCancel.style.display=\"block\"\r\n\r\n                }else{\r\n                    element.className=\"chat-say say-active\";\r\n                    recordingVoice.style.display=\"block\";\r\n                    recordingCancel.style.display=\"none\";\r\n                }\r\n                e.preventDefault();\r\n            },false)\r\n\r\n\r\n           }\r\n       }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../../assets/less/dialogue.less\";\r\n.say-active {\r\n    background: #c6c7ca;\r\n}\r\n  \r\n\r\n</style>","export default (fun,delay=500,immediate=true)=>{\r\n    let timer=null//保存定时器\r\n    return function(args){\r\n        let that=this\r\n        let _args=args\r\n        if(timer)clearTimeout(timer)//不管是否立即执行都要清空定时器\r\n        if(immediate){\r\n            if(!timer)fun.apply(that,_args)\r\n            //不管上一个延时是否完成都需要重新置定时器\r\n            timer=setTimeout(function(){//到时间后，定时器置null，避免内存泄漏\r\n                timer=null;\r\n            },delay)\r\n        }else{\r\n            timer=setTimeout(function(){\r\n                fun.call(that,_args)\r\n            },delay)\r\n        }\r\n    }\r\n\r\n}","<template>\r\n<div class=\"emoji\">\r\n        <ul class=\"emoji-default\">\r\n            <li v-for=\"(item, index) in emojiJson\" :key=\"index\"\r\n                @click=\"chooseEmojiDefault(item)\">\r\n                {{item}}\r\n            </li>\r\n        </ul>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n//import {reactive} from \"vue\"\r\nconst emotion={\r\n    \"data\": \"😀,😁,😂,😃,😄,😅,😆,😉,😊,😋,😎,😍,😘,😗,😙,😚,😇,😐,😑,😶,😏,😣,😥,😮,😯,😪,😫,😴,😌,😛,😜,😝,😒,😓,😔,😕,😲,😷,😖,😞,😟,😤,😢,😭,😦,😧,😨,😬,😰,😱,😳,😵,😡,😠,💘,❤,💓,💔,💕,💖,💗,💙,💚,💛,💜,💝,💞,💟,❣,💪,👈,👉,☝,👆,👇,✌,✋,👌,👍,👎,✊,👊,👋,👏,👐,✍,🍇,🍈,🍉,🍊,🍋,🍌,🍍,🍎,🍏,🍐,🍑,🍒,🍓,🍅,🍆,🌽,🍄,🌰,🍞,🍖,🍗,🍔,🍟,🍕,🍳,🍲,🍱,🍘,🍙,🍚,🍛,🍜,🍝,🍠,🍢,🍣,🍤,🍥,🍡,🍦,🍧,🍨,🍩,🍪,🎂,🍰,🍫,🍬,🍭,🍮,🍯,🍼,☕,🍵,🍶,🍷,🍸,🍹,🍺,🍻,🍴,🌹,🍀,🍎,💰,📱,🌙,🍁,🍂,🍃,🌷,💎,🔪,🔫,🏀,⚽,⚡,👄,👍,🔥,🙈,🙉,🙊,🐵,🐒,🐶,🐕,🐩,🐺,🐱,😺,😸,😹,😻,😼,😽,🙀,😿,😾,🐈,🐯,🐅,🐆,🐴,🐎,🐮,🐂,🐃,🐄,🐷,🐖,🐗,🐽,🐏,🐑,🐐,🐪,🐫,🐘,🐭,🐁,🐀,🐹,🐰,🐇,🐻,🐨,🐼,🐾,🐔,🐓,🐣,🐤,🐥,🐦,🐧,🐸,🐊,🐢,🐍,🐲,🐉,🐳,🐋,🐬,🐟,🐠,🐡,🐙,🐚,🐌,🐛,🐜,🐝,🐞,🦋,😈,👿,👹,👺,💀,☠,👻,👽,👾,💣\"\r\n}\r\nexport default {\r\n    data(){\r\n        return{\r\n            emojiJson:emotion.data.split(',')\r\n\r\n        }\r\n    },\r\n    methods:{\r\n        chooseEmojiDefault(e){\r\n            console.log(e)\r\n            this.$emit(\"chooseEmojiDefault\",e)\r\n        }\r\n\r\n    },\r\n   /*setup({emit}){\r\n       const emojiJson=reactive(emotion.data.split(','))\r\n       const chooseEmojiDefault=(e)=>{\r\n           console.log(e)\r\n           emit(\"chooseEmojiDefault\",e)     \r\n       }\r\n       return{\r\n           emojiJson,\r\n           chooseEmojiDefault\r\n       }\r\n   }*/\r\n     \r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\nscroll-bar {\r\n    &::-webkit-scrollbar-track {\r\n        border-radius: 10px;\r\n        background-color: #ffffff;\r\n    }\r\n    &::-webkit-scrollbar {\r\n        width: 5px;\r\n        height: 10px;\r\n        background-color: #ffffff;\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n        border-radius: 5px;\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n    }\r\n}\r\n\r\n.emoji {\r\n    text-align: left;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n    border: 1px solid #dcdfe6;\r\n    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 12%), 0 0 6px 0 rgb(0 0 0 / 4%);\r\n    .emoji-default {\r\n        width: calc(100% - 40px);\r\n        height: 202px;\r\n        overflow-y: auto;\r\n        @include scroll-bar();\r\n        padding: 0px 20px;\r\n\r\n        li {\r\n            display: inline-block;\r\n            //padding: 5px;\r\n            font-size: 24px;\r\n            width: 30px;\r\n            height: 34px;\r\n            overflow: hidden;\r\n            cursor: pointer;\r\n        }\r\n\r\n        li:hover {\r\n            background-color: #d5d5d5;\r\n        }\r\n    }\r\n}\r\n\r\n</style>","import { render } from \"./emotion.vue?vue&type=template&id=46ba3a28\"\nimport script from \"./emotion.vue?vue&type=script&lang=js\"\nexport * from \"./emotion.vue?vue&type=script&lang=js\"\n\nimport \"./emotion.vue?vue&type=style&index=0&id=46ba3a28&lang=less\"\n\nimport exportComponent from \"D:\\\\Vue-chat\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./contact-dialogue.vue?vue&type=template&id=6f2d29fe&scoped=true\"\nimport script from \"./contact-dialogue.vue?vue&type=script&lang=js\"\nexport * from \"./contact-dialogue.vue?vue&type=script&lang=js\"\n\nimport \"./contact-dialogue.vue?vue&type=style&index=0&id=6f2d29fe&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Vue-chat\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f2d29fe\"]])\n\nexport default __exports__","var uncurryThis = require('../internals/function-uncurry-this');\nvar redefine = require('../internals/redefine');\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar un$DateToString = uncurryThis(DatePrototype[TO_STRING]);\nvar getTime = uncurryThis(DatePrototype.getTime);\n\n// `Date.prototype.toString` method\n// https://tc39.es/ecma262/#sec-date.prototype.tostring\nif (String(new Date(NaN)) != INVALID_DATE) {\n  redefine(DatePrototype, TO_STRING, function toString() {\n    var value = getTime(this);\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return value === value ? un$DateToString(this) : INVALID_DATE;\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./emotion.vue?vue&type=style&index=0&id=46ba3a28&lang=less\"","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar isCallable = require('../internals/is-callable');\nvar userAgent = require('../internals/engine-user-agent');\nvar arraySlice = require('../internals/array-slice');\n\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar Function = global.Function;\n\nvar wrap = function (scheduler) {\n  return function (handler, timeout /* , ...arguments */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? arraySlice(arguments, 2) : undefined;\n    return scheduler(boundArgs ? function () {\n      apply(isCallable(handler) ? handler : Function(handler), this, args);\n    } : handler, timeout);\n  };\n};\n\n// ie9- setTimeout & setInterval additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n$({ global: true, bind: true, forced: MSIE }, {\n  // `setTimeout` method\n  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout\n  setTimeout: wrap(global.setTimeout),\n  // `setInterval` method\n  // https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval\n  setInterval: wrap(global.setInterval)\n});\n"],"sourceRoot":""}