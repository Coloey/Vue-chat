{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.date.to-string.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/components/chat/chat.vue","webpack:///./src/components/chat/msg-item.vue","webpack:///./src/components/chat/msg-item.vue?33f5","webpack:///./src/components/chat/chat.vue?67cf","webpack:///./src/components/chat/chat.vue?343b"],"names":["uncurryThis","redefine","DatePrototype","Date","prototype","INVALID_DATE","TO_STRING","un$DateToString","getTime","String","NaN","value","this","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","target","stat","forced","keys","it","id","class","$store","state","msgList","baseMsg","baseMsgObj","item","key","mid","read","to","toggleMsgRead","newMsgCount","quiet","src","user","headerUrl","time","Object","lastMsg","length","msg","date","name","quite","text","props","setup","store","dispatch","toLocaleTimeString","__exports__","components","msgItem","mixins","window","mixin","pageName","directives","more","mounted","element","startTx","startTy","addEventListener","e","operateBox","document","getElementById","touches","clientX","clientY","clearTimeout","timer","setTimeout","style","left","top","offsetTop","display","backgroundColor","changedTouches","disY","Math","abs","render"],"mappings":"qGAAA,IAAIA,EAAc,EAAQ,QACtBC,EAAW,EAAQ,QAEnBC,EAAgBC,KAAKC,UACrBC,EAAe,eACfC,EAAY,WACZC,EAAkBP,EAAYE,EAAcI,IAC5CE,EAAUR,EAAYE,EAAcM,SAIpCC,OAAO,IAAIN,KAAKO,OAASL,GAC3BJ,EAASC,EAAeI,GAAW,WACjC,IAAIK,EAAQH,EAAQI,MAEpB,OAAOD,IAAUA,EAAQJ,EAAgBK,MAAQP,M,8CCfrD,IAAIQ,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAa,EAAQ,QACrBC,EAAQ,EAAQ,QAEhBC,EAAsBD,GAAM,WAAcD,EAAW,MAIzDF,EAAE,CAAEK,OAAQ,SAAUC,MAAM,EAAMC,OAAQH,GAAuB,CAC/DI,KAAM,SAAcC,GAClB,OAAOP,EAAWD,EAASQ,Q,4DCVxBC,GAAG,U,GACFC,MAAM,e,GASFA,MAAM,cAAcD,GAAG,e,SAErBC,MAAM,kB,SAGNA,MAAM,gB,EACV,gCAAW,UAAP,MAAE,G,+IAhBd,gCAoBM,MApBN,EAoBM,CAnBJ,gCAkBK,KAlBL,EAkBK,E,2BAjBH,gCAOU,2CANa,EAAAC,OAAOC,MAAMC,QAAQC,SAAO,SAA1CC,G,6DADT,yBAOU,GALPC,KAAMD,EACPL,MAAM,uBACLO,IAAKF,EAAWG,K,kCAInB,gCAQO,OARP,EAQO,CAPL,gCAMK,WAL8B,EAAAC,M,yBAAjC,gCAEK,KAFL,EAAuC,Y,yBAGvC,gCAAyC,KAAzC,EAAgC,SAChC,U,qCCRCT,MAAM,a,GACJA,MAAM,c,GAMNA,MAAM,e,GACJA,MAAM,U,aAIRA,MAAM,Y,GACJA,MAAM,a,GACNA,MAAM,e,GACNA,MAAM,Y,GACJA,MAAM,gC,2GAxBrB,gCA8BK,WA7BH,yBA4Bc,GA3BXU,GAAE,C,gCAA2D,OAAK,GAAE,KAAQ,OAAK,KAAK,OAIlF,QAAK,+BAAE,EAAAC,cAAc,EAAAL,KAAKP,GAAE,Y,+BAEjC,iBAoBM,CApBN,gCAoBM,MApBN,EAoBM,CAnBJ,gCAUM,MAVN,EAUM,C,4BARJ,gCAEM,KAFHC,MAAM,iBAAe,6BACtB,EAAAM,KAAKM,aAAW,M,aADgB,EAAAH,OAAS,EAAAI,OAAO,EAAAP,KAAKM,YAAW,K,4BAIlE,gCAAmD,IAAnD,EAAmD,W,aAAnB,EAAAH,MAAQ,EAAAI,SACxC,gCAEM,MAFN,EAEM,CADJ,gCAAkC,OAA5BC,IAAK,EAAAR,KAAKS,KAAKC,W,cAGzB,gCAOM,MAPN,EAOM,CANJ,gCAAgI,MAAhI,EAAgI,6BAAtG,EAAAC,KAAqC,IAAhCC,OAAOrB,KAAK,EAAAS,KAAKa,SAASC,OAAW,EAAAd,KAAKe,IAAI,EAAAf,KAAKe,IAAID,OAAM,GAAIE,KAAK,EAAAhB,KAAKa,QAAQG,OAAI,GACtH,gCAAmD,MAAnD,EAAmD,6BAAvB,EAAAhB,KAAKS,KAAKQ,MAAI,GAC1C,gCAGM,MAHN,EAGM,C,4BAFJ,gCAAoE,MAApE,EAAoE,W,YAAlB,EAAAjB,KAAKkB,SACvD,gCAA2G,yCAAlE,IAAhCN,OAAOrB,KAAK,EAAAS,KAAKa,SAASC,OAAW,EAAAd,KAAKe,IAAI,EAAAf,KAAKe,IAAID,OAAM,GAAIK,KAAK,EAAAnB,KAAKa,QAAQM,MAAI,a,2CAU7F,GACbF,KAAK,UACLG,MAAO,CAAC,QACRC,MAHa,SAGPD,GACJ,IAAME,EAAQ,iBACd,EAAuB,oBAAO,oBAAOF,EAAMpB,OAAnCG,EAAR,EAAQA,KAAMI,EAAd,EAAcA,MAGRF,EAAc,SAACZ,EAAGZ,GAASyC,EAAMC,SAAS,gBAAgB9B,EAAGZ,IAC7D8B,EAAO,SAAC9B,GAAD,OAAW,IAAIR,KAAKQ,GAAO2C,sBAExC,MAAO,CACLb,OACAN,gBACAF,OACAI,W,qBC9CN,MAAMkB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,QFoBA,GACbR,KAAM,OACNS,WAAY,CAAEC,QAAA,GACdC,OAAQ,CAACC,OAAOC,OAChBT,MAJa,WAKX,IAAMU,EAAW,iBAAI,MACrB,MAAO,CACLA,aAGJC,WAAY,CACVC,KAAM,CACJC,QADI,SACIC,GACN,IAAIC,EAASC,EACbF,EAAQG,iBACN,cACA,SAAUC,GACJ,IAAIC,EAAaC,SAASC,eAAe,eACzCC,EAAUJ,EAAEI,QAAQ,GACpBP,EAAUO,EAAQC,QAClBP,EAAUM,EAAQE,QAClBC,aAAahE,KAAKiE,OAClBjE,KAAKiE,MAAQC,YAAW,WAExBR,EAAWS,MAAMC,MACZd,EAAU,GAAK,IAAM,IAAMA,EAAU,IAAM,KAChDI,EAAWS,MAAME,IAAMhB,EAAQiB,UAAW,KAC1CZ,EAAWS,MAAMI,QAAU,QAC3BlB,EAAQc,MAAMK,gBAAkB,YAC7B,QAEP,GACJnB,EAAQG,iBACN,aACA,SAAUC,GACR,IAAII,EAAUJ,EAAEgB,eAAe,GAC7BC,EAAOb,EAAQE,QACbY,KAAKC,IAAIF,EAAOnB,GAAW,IAC7BS,aAAahE,KAAKiE,UAGtB,GAEFZ,EAAQG,iBACN,YACA,WACEQ,aAAahE,KAAKiE,UAEpB,O,UGpEV,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASY,KAErD,gB,kCCTf","file":"js/chunk-0c84946a.9d75fd6c.js","sourcesContent":["var uncurryThis = require('../internals/function-uncurry-this');\nvar redefine = require('../internals/redefine');\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar un$DateToString = uncurryThis(DatePrototype[TO_STRING]);\nvar getTime = uncurryThis(DatePrototype.getTime);\n\n// `Date.prototype.toString` method\n// https://tc39.es/ecma262/#sec-date.prototype.tostring\nif (String(new Date(NaN)) != INVALID_DATE) {\n  redefine(DatePrototype, TO_STRING, function toString() {\n    var value = getTime(this);\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return value === value ? un$DateToString(this) : INVALID_DATE;\n  });\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","<template>\r\n  <div id=\"wechat\">\r\n    <ul class=\"wechat-list\">\r\n      <msgItem\r\n        v-for=\"baseMsgObj in $store.state.msgList.baseMsg\"\r\n        :item=\"baseMsgObj\"\r\n        class=\"list-row line-bottom\"\r\n        :key=\"baseMsgObj.mid\"\r\n        v-more\r\n      >\r\n      </msgItem>\r\n      <span class=\"operate-box\" id=\"operate-box\">\r\n        <ul>\r\n          <li class=\"operate-unread\" v-if=\"read\">\r\n            标为未读\r\n          </li>\r\n          <li class=\"operate-read\" v-else>标为已读</li>\r\n          <li>删除</li>\r\n        </ul>\r\n      </span>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport msgItem from \"../chat/msg-item.vue\";\r\nimport { ref } from \"vue\";\r\nexport default {\r\n  name: \"chat\",\r\n  components: { msgItem },\r\n  mixins: [window.mixin],\r\n  setup() {\r\n    const pageName = ref(\"信息\")\r\n    return {\r\n      pageName,\r\n    };\r\n  },\r\n  directives: {\r\n    more: {\r\n      mounted(element) {\r\n        var startTx, startTy;\r\n        element.addEventListener(\r\n          \"touchstart\",\r\n          function (e) {\r\n                var operateBox = document.getElementById(\"operate-box\"),\r\n                touches = e.touches[0];\r\n                startTx = touches.clientX;\r\n                startTy = touches.clientY;\r\n                clearTimeout(this.timer);\r\n                this.timer = setTimeout(() => {\r\n                // 控制菜单的位置\r\n                operateBox.style.left =\r\n                    (startTx - 18 > 250 ? 250 : startTx - 18) + \"px\";\r\n                operateBox.style.top = element.offsetTop+ \"px\";\r\n                operateBox.style.display = \"block\";\r\n                element.style.backgroundColor = \"#e5e5e5\";\r\n                }, 500);\r\n            },\r\n            false);\r\n        element.addEventListener(\r\n          \"touchmove\",\r\n          function (e) {\r\n            var touches = e.changedTouches[0],\r\n              disY = touches.clientY;\r\n            if (Math.abs(disY - startTy) > 10) {\r\n              clearTimeout(this.timer);\r\n            }\r\n          },\r\n          false\r\n        );\r\n        element.addEventListener(\r\n          \"touchend\",\r\n          function () {\r\n            clearTimeout(this.timer);\r\n          },\r\n          false\r\n        );\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../../assets/less/wechat.less\";\r\n</style>","<template>\r\n  <li>\r\n    <router-link\r\n      :to=\"{\r\n        path: '/chat/dialogue',\r\n        query: { id: item.id, name: item.user.name },\r\n      }\"\r\n      v-on:click=\"toggleMsgRead(item.id,'enter')\"\r\n    >\r\n      <div class=\"list-info\">\r\n        <div class=\"header-box\">\r\n          <!-- 未读且未屏蔽，显示新信息数量 -->\r\n          <i class=\"new-msg-count\" v-show=\"!read && !quiet&&item.newMsgCount>0\">{{\r\n            item.newMsgCount\r\n          }}</i>\r\n          <!-- 未读且屏蔽，只显示小红点 -->\r\n          <i class=\"new-msg-dot\" v-show=\"!read && quiet\"></i>\r\n          <div class=\"header\">\r\n            <img :src=\"item.user.headerUrl\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"desc-box\">\r\n          <div class=\"desc-time\">{{ time(Object.keys(item.lastMsg).length===0?item.msg[item.msg.length-1].date:item.lastMsg.date) }}</div>\r\n          <div class=\"desc-author\">{{ item.user.name }}</div>\r\n          <div class=\"desc-msg\">\r\n            <div class=\"desc-mute iconfont icon-mute\" v-show=\"item.quite\"></div>\r\n            <span>{{ Object.keys(item.lastMsg).length===0?item.msg[item.msg.length-1].text:item.lastMsg.text  }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </router-link>\r\n  </li>\r\n</template>\r\n<script>\r\nimport { useStore } from \"vuex\";\r\nimport { toRefs } from \"vue\";\r\nexport default {\r\n  name:\"msgItem\",\r\n  props: [\"item\"],\r\n  setup(props) {\r\n    const store = useStore();\r\n    const { read, quiet} = toRefs(toRefs(props.item));\r\n    //console.log(props/)\r\n    //切换消息已读或未读状态\r\n    const toggleMsgRead=(id,value)=>{store.dispatch('toggleMsgRead',id,value)}\r\n    const time = (value) => new Date(value).toLocaleTimeString();\r\n  \r\n    return {\r\n      time,\r\n      toggleMsgRead,\r\n      read,\r\n      quiet,\r\n      \r\n    };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n</style>","import { render } from \"./msg-item.vue?vue&type=template&id=53bf37b4\"\nimport script from \"./msg-item.vue?vue&type=script&lang=js\"\nexport * from \"./msg-item.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Vue-chat\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./chat.vue?vue&type=template&id=c866765c\"\nimport script from \"./chat.vue?vue&type=script&lang=js\"\nexport * from \"./chat.vue?vue&type=script&lang=js\"\n\nimport \"./chat.vue?vue&type=style&index=0&id=c866765c&lang=less\"\n\nimport exportComponent from \"D:\\\\Vue-chat\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./chat.vue?vue&type=style&index=0&id=c866765c&lang=less\""],"sourceRoot":""}