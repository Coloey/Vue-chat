(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31df94ce"],{"0d03":function(e,t,c){var n=c("e330"),a=c("6eeb"),r=Date.prototype,o="Invalid Date",s="toString",i=n(r[s]),l=n(r.getTime);String(new Date(NaN))!=o&&a(r,s,(function(){var e=l(this);return e===e?i(this):o}))},"0ee6":function(e,t,c){},"7abc":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"dialogue"},r={id:"wx-header"},o={class:"other"},s={class:"center"},i=Object(n["createElementVNode"])("span",null,"信息",-1),l={class:"dialogue-section clearfix"},u={class:"header"},d=["src"],p={class:"text"},m={class:"text"},b={class:"header"},v=["src"],f=Object(n["createElementVNode"])("span",{class:"msg-more",id:"msg-more"},[Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",null,"复制"),Object(n["createElementVNode"])("li",null,"转发"),Object(n["createElementVNode"])("li",null,"删除")])],-1),O={class:"dialogue-footer"},j={class:"component-dialogue-bar-person"},g={class:"chat-way"},y={class:"chat-say"},h=Object(n["createElementVNode"])("span",{class:"one"},"按住 说话",-1),N=Object(n["createElementVNode"])("span",{class:"two"},"松开 结束",-1),E=[h,N],V={class:"chat-way"},k=Object(n["createElementVNode"])("span",{class:"expression iconfont icon-dialogue-smile"},null,-1),w=Object(n["createStaticVNode"])('<div class="recording" style="display:none;" id="recording"><div class="recording-voice" style="display:none;" id="recording-voice"><div class="voice-inner"><div class="voice-icon"></div><div class="voice-volume"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div></div><p>手指上划,取消发送</p></div><div class="recording-cancel" style="display:none;"><div class="cancel-inner"></div><p>松开手指,取消发送</p></div></div>',1);function D(e,t,c,h,N,D){var x=Object(n["resolveComponent"])("router-link"),I=Object(n["resolveDirective"])("more"),B=Object(n["resolveDirective"])("press");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("header",r,[Object(n["createElementVNode"])("div",o,[Object(n["createVNode"])(x,{to:{path:"/chat/dialogue/dialogue-detail",query:{msgInfo2:h.msgInfo2}},tag:"span",class:"iconfont icon-chat-friends"},null,8,["to"])]),Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(x,{to:"/",tag:"div",class:"iconfont icon-return-arrow"},{default:Object(n["withCtx"])((function(){return[i]})),_:1}),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(h.pageName),1)])]),Object(n["createElementVNode"])("div",l,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(h.msgInfo.msg,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"other clearfix",key:t},[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("img",{src:e.headerUrl},null,8,d)]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("p",p,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.text),1)])),[[I]])])})),128)),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(h.msgArr,(function(t,c){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"self clearfix",key:c},[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("p",m,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.text),1)])),[[I]]),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("img",{src:e.$store.state.userInfo.avatar},null,8,v)])])),[[n["vShow"],t.toUser==e.$route.query.id]])})),128)),f]),Object(n["createElementVNode"])("footer",O,[Object(n["createElementVNode"])("div",j,[Object(n["withDirectives"])(Object(n["createElementVNode"])("span",{class:"iconfont icon-dialogue-jianpan",onClick:t[0]||(t[0]=function(e){return h.currentChatWay=!0})},null,512),[[n["vShow"],!h.currentChatWay]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("span",{class:"iconfont icon-dialogue-voice",onClick:t[1]||(t[1]=function(e){return h.currentChatWay=!1})},null,512),[[n["vShow"],h.currentChatWay]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",g,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",y,E)),[[B]])],512),[[n["vShow"],!h.currentChatWay]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",V,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.InpVal=e}),class:"chat-txt",type:"text",onFocus:t[3]||(t[3]=function(){return h.focusIpt&&h.focusIpt.apply(h,arguments)}),onBlur:t[4]||(t[4]=function(){return h.blurIpt&&h.blurIpt.apply(h,arguments)})},null,544),[[n["vModelText"],h.InpVal]])],512),[[n["vShow"],h.currentChatWay]]),k,Object(n["createElementVNode"])("span",{class:"more iconfont",style:{"font-size":"15px",background:"#aa96da",padding:"0px 5px","border-radius":"12px",color:"#fff"},onClick:t[5]||(t[5]=function(){return h.submit&&h.submit.apply(h,arguments)})},"发送"),w])])])}c("b0c0"),c("0d03"),c("e9c4"),c("4795");var x=c("5c40"),I=c("6c02"),B=c("5502"),S=c("7ed9"),C={name:"dialogue",beforeRouteEnter:function(e,t,c){c((function(e){e.$store.commit("setPageName",e.$route.query.name)}))},setup:function(){var e=Object(I["c"])(),t=Object(B["b"])(),c=Object(n["ref"])(""),a=Object(n["ref"])(e.query.name),r=Object(n["ref"])(!0),o=Object(n["ref"])(null),s=Object(n["ref"])(S["a"].msgArr),i=Object(x["q"])((function(){for(var c in t.state.msgList.baseMsg)if(t.state.msgList.baseMsg[c].id==e.query.id)return t.state.msgList.baseMsg[c];return{}})),l=function(){var n=(new Date).toLocaleString(),a={date:n,text:c.value,toUser:e.query.id},r={date:n,text:c.value},o=e.query.id;t.commit("changeLastMsg",{lastMsg:r,id:o}),c.value="",S["a"].submit(a),s.value=S["a"].msgArr,console.log(s.value)},u=Object(x["q"])((function(){return encodeURIComponent(JSON.stringify(i.value))})),d=function(){o=setInterval((function(){document.body.scrollTop=document.body.scrollHeight}),100)},p=function(){clearInterval(o)};return{pageName:a,currentChatWay:r,focusIpt:d,blurIpt:p,msgInfo:i,msgInfo2:u,submit:l,InpVal:c,msgArr:s}},directives:{press:{mounted:function(e){var t,c=document.querySelector(".recording"),n=document.querySelector(".recording-voice"),a=document.querySelector(".recording-cancel");e.addEventListener("touchstart",(function(a){e.className="chat-say say-active",c.style.display=n.style.display="block";var r=a.touches[0];t=r.clientY,a.preventDefault()}),!1),e.addEventListener("touchend",(function(t){e.className="chat-say",a.style.display=c.style.display=n.style.display="none",t.preventDefault()}),!1),e.addEventListener("touchmove",(function(c){var r=c.changedTouches[0],o=r.clientY,s=t-o;s>50?(e.className="chat-say",n.style.display="none",a.style.display="block"):(e.className="chat-say say-active",n.style.display="block",a.style.display="none"),c.preventDefault()}),!1)}},more:{mounted:function(e){var t,c;e.addEventListener("touchstart",(function(n){var a=document.getElementById("msg-more"),r=n.touches[0];t=r.clientX,c=r.clientY,clearTimeout(this.timer),this.timer=setTimeout((function(){a.style.left=(t-18>180?180:t-18)+"px",a.style.top=e.offsetTop-33+"px",a.style.display="block",e.style.backgroundColor="#e5e5e5"}),500)}),!1),e.addEventListener("touchmove",(function(e){var t=e.changedTouches[0],n=t.clientY;Math.abs(n-c)>10&&clearTimeout(this.timer)}),!1),e.addEventListener("touchend",(function(){clearTimeout(this.timer)}),!1)}}}},L=(c("c645"),c("6b0d")),q=c.n(L);const T=q()(C,[["render",D]]);t["default"]=T},"7ed9":function(e,t,c){"use strict";var n={msgArr:[],submit:function(e){n.msgArr.push(e)}};t["a"]=n},c645:function(e,t,c){"use strict";c("0ee6")},e9c4:function(e,t,c){var n=c("23e7"),a=c("da84"),r=c("d066"),o=c("2ba4"),s=c("e330"),i=c("d039"),l=a.Array,u=r("JSON","stringify"),d=s(/./.exec),p=s("".charAt),m=s("".charCodeAt),b=s("".replace),v=s(1..toString),f=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,j=/^[\uDC00-\uDFFF]$/,g=function(e,t,c){var n=p(c,t-1),a=p(c,t+1);return d(O,e)&&!d(j,a)||d(j,e)&&!d(O,n)?"\\u"+v(m(e,0),16):e},y=i((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&n({target:"JSON",stat:!0,forced:y},{stringify:function(e,t,c){for(var n=0,a=arguments.length,r=l(a);n<a;n++)r[n]=arguments[n];var s=o(u,null,r);return"string"==typeof s?b(s,f,g):s}})}}]);
//# sourceMappingURL=chunk-31df94ce.115b2fea.js.map